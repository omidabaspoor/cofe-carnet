/* --- 1. Root Variables and Base Styles --- */
:root {
    --primary-color: #4CAF50;
    --dark-green: #2e7d32;
    --accent-color: #cddc39;
    --bg-color: #121212;
    --surface-color: #1e1e1e;
    --text-color: #e0e0e0;
    --text-muted: #a0a0a0;
    --text-light: #ffffff;
    --border-color: #333333;
    --font-primary: 'Vazirmatn', sans-serif;
    --font-headings: 'Lalezar', cursive;
    --shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
    --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.3);
}

* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body { font-family: var(--font-primary); background-color: var(--bg-color); color: var(--text-color); line-height: 1.8; font-size: 16px; overflow-x: hidden; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
.section-title { text-align: center; font-family: var(--font-headings); font-size: clamp(2.5rem, 6vw, 3.5rem); color: var(--text-light); letter-spacing: 1px; margin-bottom: 60px; position: relative; }
.section-title::after { content: ''; position: absolute; width: 80px; height: 4px; background: var(--primary-color); bottom: -15px; left: 50%; transform: translateX(-50%); border-radius: 2px; }
img { max-width: 100%; display: block; }

/* --- 2. Header and Navigation --- */
.header { background-color: rgba(18, 18, 18, 0.8); backdrop-filter: blur(10px); padding: 1rem 0; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border-color); }
.header__container { display: flex; justify-content: space-between; align-items: center; }
.header__logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
.header__logo img { height: 40px; }
.logo-text { font-family: var(--font-headings); font-size: 2rem; color: var(--text-light); }
.header__nav ul { list-style: none; display: flex; gap: 30px; }
.header__nav a { color: var(--text-muted); font-weight: 400; padding: 5px 0; position: relative; text-decoration: none; transition: color 0.3s ease; }
.header__nav a::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 50%; background-color: var(--primary-color); transition: all 0.3s ease; transform: translateX(-50%); }
.header__nav a:hover, .header__nav .nav__link--active { color: var(--text-light); }
.header__nav a:hover::after, .header__nav .nav__link--active::after { width: 100%; }

/* --- 3. Hero Section --- */
.hero { padding: 100px 0; position: relative; overflow: hidden; text-align: center; }
.hero__stars { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><circle cx="5" cy="5" r="1" fill="%232e7d32"/></svg>'); animation: stars-fall 60s linear infinite; opacity: 0.3; }
@keyframes stars-fall { from { background-position: 0 0; } to { background-position: 0 1000px; } }
.hero__container { display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; z-index: 2; min-height: 50vh; }
.hero__content h1 { font-family: var(--font-headings); font-size: clamp(2.8rem, 7vw, 4.5rem); color: var(--text-light); margin-bottom: 1.5rem; line-height: 1.2; }
.hero__content p { font-size: 1.1rem; max-width: 650px; margin: 0 auto 2.5rem; color: var(--text-muted); }
.button { background: var(--primary-color); color: var(--text-light); padding: 15px 35px; border-radius: 50px; font-weight: 700; display: inline-flex; align-items: center; gap: 10px; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4); }
.button:hover { background-color: var(--accent-color); color: var(--bg-color); transform: translateY(-5px) scale(1.05); box-shadow: 0 8px 25px rgba(205, 220, 57, 0.4); }
.button i { font-size: 1.2rem; }

/* --- 4. Features Section --- */
.features { padding: 100px 0; }
.features__grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
.feature-card { background-color: var(--surface-color); padding: 40px 30px; border-radius: 15px; border: 1px solid var(--border-color); text-align: center; transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; }
.feature-card:hover { transform: translateY(-10px); box-shadow: var(--shadow); border-color: var(--primary-color); }
.feature-card__icon { font-size: 3rem; color: var(--primary-color); margin-bottom: 20px; display: inline-block; transition: transform 0.3s ease; }
.feature-card:hover .feature-card__icon { transform: scale(1.2) rotate(-10deg); }
.feature-card__title { font-family: var(--font-headings); font-size: 1.8rem; margin-bottom: 15px; color: var(--text-light); }
.feature-card__text { color: var(--text-muted); }

/* --- 5. Gallery Section --- */
.gallery { padding: 100px 0; }
.gallery__grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
.gallery__item { border-radius: 15px; overflow: hidden; box-shadow: var(--shadow); transition: transform 0.4s ease, box-shadow 0.4s ease; border: 2px solid var(--border-color); aspect-ratio: 4 / 3; }
.gallery__item:hover { transform: translateY(-10px) scale(1.03); box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7); }
.gallery__item img { width: 100%; height: 100%; object-fit: cover; }

/* --- 6. About Us Section --- */
.about { padding: 100px 0; }
.about__wrapper { position: relative; border-radius: 20px; overflow: hidden; height: 500px; box-shadow: var(--shadow); }
.about__map { width: 100%; height: 100%; }
.about__map iframe { filter: grayscale(1) invert(0.9) contrast(0.8); }
.about__content-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, rgba(18, 18, 18, 1) 0%, rgba(18, 18, 18, 0.95) 40%, rgba(18, 18, 18, 0) 100%); display: flex; flex-direction: column; justify-content: center; padding: 50px; color: var(--text-light); transform: translateX(-100%); transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1); }
.about__wrapper:hover .about__content-overlay { transform: translateX(0); }
.about__text h3 { font-family: var(--font-headings); font-size: 2.5rem; color: var(--primary-color); margin-bottom: 1rem; }
.about__text p { font-size: 1.1rem; max-width: 400px; margin-bottom: 1rem; color: var(--text-color); }
.about__address { font-size: 1rem !important; color: var(--text-muted) !important; line-height: 1.6; }
.about__address strong { color: var(--text-light); font-weight: 700; }
.social-links { display: flex; gap: 15px; margin-top: 25px; flex-wrap: wrap; }
.social-links__item { width: 50px; height: 50px; background-color: var(--surface-color); color: var(--primary-color); display: flex; justify-content: center; align-items: center; border-radius: 50%; font-size: 1.5rem; text-decoration: none; transition: all 0.3s ease; }
.social-links__item:hover { background-color: var(--primary-color); color: var(--text-light); transform: translateY(-5px); }

/* --- 7. Licenses Section --- */
.licenses { padding: 80px 0; background-color: #000; }
.licenses__grid { display: flex; justify-content: center; align-items: center; gap: 40px; flex-wrap: wrap; }
.license__item a { display: block; }
.license__item img { background-color: var(--surface-color); padding: 10px; border-radius: 15px; transition: all 0.3s ease; border: 1px solid var(--border-color); }
.license__item img:hover { transform: translateY(-8px); box-shadow: var(--shadow); border-color: var(--primary-color); }

/* --- 8. Chat Widget --- */
.chat-widget { position: fixed; bottom: 25px; right: 25px; z-index: 1001; }
.chat-widget__button { width: 65px; height: 65px; background: linear-gradient(45deg, var(--primary-color), var(--dark-green)); color: var(--text-light); font-size: 2.5rem; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); transition: transform 0.3s ease; animation: pulse 2.5s infinite; }
.chat-widget__button:hover { transform: scale(1.1); animation-play-state: paused; }
.chat-widget__window { position: absolute; bottom: 85px; right: 0; width: 350px; max-height: 500px; background: var(--surface-color); border-radius: 15px; box-shadow: var(--shadow); overflow: hidden; transform: translateY(20px) scale(0.95); opacity: 0; pointer-events: none; transition: transform 0.3s ease, opacity 0.3s ease; border: 1px solid var(--border-color); display: flex; flex-direction: column; }
.chat-widget.is-open .chat-widget__window { transform: translateY(0) scale(1); opacity: 1; pointer-events: auto; }
.chat-widget__header { background-color: var(--dark-green); color: var(--text-light); padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
.chat-widget__header h3 { font-size: 1.1rem; font-family: var(--font-primary); }
.chat-widget__close-btn { background: none; border: none; color: var(--text-light); font-size: 1.8rem; cursor: pointer; line-height: 1; }
.chat-widget__body { display: flex; flex-direction: column; height: 100%; overflow: hidden; }
.chat-widget__messages { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
.message { padding: 10px 15px; border-radius: 18px; line-height: 1.5; max-width: 80%; word-wrap: break-word; }
.message--support { background-color: var(--bg-color); border-bottom-left-radius: 4px; align-self: flex-start; }
.message--user { background-color: var(--dark-green); color: var(--text-light); border-bottom-right-radius: 4px; align-self: flex-end; }
.chat-widget__input-form { display: flex; padding: 10px; background-color: var(--bg-color); flex-shrink: 0; }
.chat-widget__input { flex-grow: 1; border: none; background: transparent; color: var(--text-color); padding: 10px; font-family: var(--font-primary); }
.chat-widget__input:focus { outline: none; }
.chat-widget__send-btn { background: none; border: none; color: var(--primary-color); font-size: 1.5rem; cursor: pointer; transition: color 0.3s ease; padding: 0 10px; }
.chat-widget__send-btn:hover { color: var(--accent-color); }

/* --- 9. Footer --- */
.footer { background-color: #000; color: var(--text-muted); text-align: center; padding: 30px 0; border-top: 1px solid var(--border-color); }
.logo-text-footer { font-family: var(--font-headings); color: var(--primary-color); }

/* --- 10. Animation & Responsive --- */
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(76, 175, 80, 0); } 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); } }
.animate-on-load { animation: fadeInSlideUp 0.8s ease-out forwards; opacity: 0; }
.animate-on-scroll { opacity: 0; transform: translateY(50px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
.animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }
.animate-delay-1 { animation-delay: 0.2s; transition-delay: 0.2s; }
.animate-delay-2 { animation-delay: 0.4s; transition-delay: 0.4s; }
@keyframes fadeInSlideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

.button--navigate { background: var(--surface-color); color: var(--primary-color); margin-top: 20px; border: 1px solid var(--primary-color); box-shadow: none; }
.button--navigate:hover { background-color: var(--primary-color); color: var(--bg-color); transform: translateY(-5px) scale(1.05); box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4); }

.social-links__item svg, .social-links__item i { transition: transform 0.3s ease; }
.social-links__item:hover svg, .social-links__item:hover i { transform: scale(1.1) rotate(-5deg); }


@media (max-width: 992px) {
    .about__content-overlay { transform: translateX(0); background: linear-gradient(0deg, rgba(18, 18, 18, 1) 0%, rgba(18, 18, 18, 0.95) 40%, rgba(18, 18, 18, 0.7) 100%); justify-content: flex-end; padding: 30px; text-align: center; }
    .about__text p { margin-left: auto; margin-right: auto; }
}

@media (max-width: 768px) {
    .header__nav { display: none; }
    .gallery__grid { grid-template-columns: 1fr; }

}


/* --- 14. DEFINITIVE: Polished Overlay Mobile Navigation --- */

.mobile-nav-toggle,
.mobile-nav-overlay {
    display: none;
}

/* --- Mobile Breakpoint --- */
@media (max-width: 768px) {
    /* Hide the original desktop nav on mobile */
    .header__nav {
        display: none;
    }

    /* Show and style the hamburger button */
    .mobile-nav-toggle {
        display: block;
        position: relative;
        z-index: 10001;
        background: transparent;
        border: 0;
        width: 2.5rem;
        aspect-ratio: 1;
        padding: 0;
        cursor: pointer;
    }

    /* Hamburger lines */
    .mobile-nav-toggle::before,
    .mobile-nav-toggle::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 3px;
        background: var(--text-light);
        border-radius: 5px;
        left: 0;
        transition: transform 0.3s ease-out, top 0.3s ease-out;
    }
    .mobile-nav-toggle::before { top: 25%; }
    .mobile-nav-toggle::after { top: 65%; }
    
    /* The main overlay container with blur effect */
    .mobile-nav-overlay {
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        z-index: 10000;
        inset: 0;
        background-color: rgba(18, 18, 18, 0.9);
        backdrop-filter: blur(10px);
        opacity: 0;
        visibility: hidden;
        transform: scale(1.05);
        transition: opacity 0.4s ease, visibility 0s 0.4s, transform 0.4s ease;
    }

    /* NEW: The close button inside the overlay */
    .mobile-nav__close-btn {
        position: absolute;
        top: 2rem;
        left: 2rem; /* Top-left for RTL */
        background: none;
        border: none;
        color: var(--text-muted);
        font-size: 2.5rem;
        font-weight: bold;
        cursor: pointer;
        line-height: 1;
        transition: color 0.3s ease, transform 0.3s ease;
    }
    .mobile-nav__close-btn:hover {
        color: var(--text-light);
        transform: rotate(90deg);
    }
    
    /* Styling for the navigation links */
    .mobile-nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
        text-align: center;
    }
    .mobile-nav li {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .mobile-nav a {
        color: var(--text-light);
        text-decoration: none;
        font-family: var(--font-headings);
        font-size: 2.5rem;
        padding: 0.5rem 1rem;
        display: block;
    }

    /* --- STYLES FOR THE "OPEN" STATE --- */
    
    .mobile-nav-overlay[data-visible="true"] {
        opacity: 1;
        visibility: visible;
        transform: scale(1);
        transition-delay: 0s;
    }
    
    /* Staggered animation for links appearing */
    .mobile-nav-overlay[data-visible="true"] .mobile-nav li:nth-child(1) { transition-delay: 0.2s; opacity: 1; transform: translateY(0); }
    .mobile-nav-overlay[data-visible="true"] .mobile-nav li:nth-child(2) { transition-delay: 0.3s; opacity: 1; transform: translateY(0); }
    .mobile-nav-overlay[data-visible="true"] .mobile-nav li:nth-child(3) { transition-delay: 0.4s; opacity: 1; transform: translateY(0); }
    .mobile-nav-overlay[data-visible="true"] .mobile-nav li:nth-child(4) { transition-delay: 0.5s; opacity: 1; transform: translateY(0); }

    /* Hamburger icon transforms into an "X" */
    .mobile-nav-toggle[aria-expanded="true"]::before {
        top: 45%;
        transform: rotate(45deg);
    }
    .mobile-nav-toggle[aria-expanded="true"]::after {
        top: 45%;
        transform: rotate(-45deg);
    }
    
    /* Prevent body from scrolling when menu is open */
    body.nav-is-open {
        overflow: hidden;
    }
}






